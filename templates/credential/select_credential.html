<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Manage Verifiers - CONNECTORS</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='header.css') }}">

  <style>
    .container {
      max-width: 1400px;
      margin: 2rem auto;
      padding: 2rem;
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    h1 {
      color: var(--primary);
      margin-bottom: 2rem;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      text-align: left;
      padding: 0.75rem;
      border-bottom: 1px solid #ddd;
    }
    th {
      background-color: var(--bg-light);
    }
    .actions {
      display: flex;
      gap: 0.5rem;
    }
   .button {
  display: inline-block;       /* Ensures <a> behaves like <button> */
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 8px;
  font-weight: bold;
  font-size: 1rem;
  cursor: pointer;
  text-decoration: none;       /* Removes underline on <a> */
  text-align: center;
  vertical-align: middle;
  line-height: 1.2;
}

    .btn-create {
      background: var(--accent);
      color: white;
      text-decoration: none;
      padding: 0.75rem 1.5rem;
      display: inline-block;
      margin-bottom: 1.5rem;
      border-radius: 8px;
    }
    .btn-delete {
      background: red;
      color: white;
    }
    .btn-edit {
      background: #2f4858;
      color: white;
    }

  </style>
</head>
<body>

<header>
  <div class="logo">
    <strong><a href="/" style="color: var(--primary); text-decoration: none;">CONNECTORS</a></strong>
  </div>
  <nav>
    <a href="/menu">Menu</a>
    <a href="/documentation/credential_select">Explain ?</a>
    {% include "account.html" %}
  </nav>
</header>



<div class="container">
  {% if credential_type == "sandbox" %}
  <h1>Your Sandbox Keys</h1>
  {% else %}
  <h1>Your Qualified Credentials</h1>
  {% endif %}

  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <div class="flashes">
        {% for message in messages %}
          <p>{{ message }}</p>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}
  
    {% if credential_type == "sandbox" %}
        <a class="btn-create" href="/credential/create/{{credential_type}}">+ Create a new key</a>
    {% else %}
        <a class="btn-create" href="/credential/create/{{credential_type}}">+ Register a new credential</a>
    {% endif %}

  <table>
    <thead>
        <th>Name</th>
        <th>SAN DNS</th>
         <th>SAN URI</th>
          <th>USE</th>
         <th>EXP.</th>

        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for credential in credentials %}
      <tr>
        <td>{{ credential.credential_ID }}</td>
           <td>{{ credential.san_dns }}</td>
              <td>{{ credential.san_uri }}</td>
              <td>{{ credential.use }}</td>
         <td>{{ credential.exp }}</td>

        <td class="actions">
          <form method="POST"
      action="/credential/delete/{{credential_type}}/{{ credential.id }}"
      onsubmit="return confirmDelete('{{ credential.credential_ID }}')">
  <button class="button btn-delete" type="submit">Delete</button>
</form>
          
          <a class="button btn-edit" href="/credential/update/{{ credential.id }}">Update</a>
        </td>
      </tr>
      {% else %}
      <tr><td colspan="6">You have no credentials yet.</td></tr>
      {% endfor %}
    </tbody>
    
  </table>
</div>

{% include "footer.html" %}

<script>
  function toggleDropdown() {
    var dropdown = document.getElementById("dropdown");
    dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
  }

  // Optional: close dropdown on click outside
  window.onclick = function(event) {
    if (!event.target.matches('.user-icon')) {
      var dropdown = document.getElementById("dropdown");
      if (dropdown && dropdown.style.display === "block") {
        dropdown.style.display = "none";
      }
    }
  };
</script>

<script>
  function confirmDelete(name) {
    return confirm(`Delete credential "${name}"? This cannot be undone.`);
  }
</script>
</body>
</html>
